<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BreathSafe â€“ Patient AQI Advisor</title>

<style>
body{
    font-family:Segoe UI, sans-serif;
    background:#eef3ff;
    margin:0;
}
header{
    background:linear-gradient(90deg,#0f2027,#203a43,#2c5364);
    color:white;
    padding:20px;
    text-align:center;
}
.container{
    max-width:900px;
    margin:auto;
    padding:30px;
}
.card{
    background:white;
    padding:25px;
    border-radius:16px;
    margin-bottom:25px;
    box-shadow:0 12px 30px rgba(0,0,0,0.12);
}
select,button{
    width:100%;
    padding:12px;
    margin-top:10px;
}
button{
    background:#1f3c88;
    color:white;
    border:none;
    font-size:16px;
    cursor:pointer;
}

/* LUNGS */
.lungs{
    display:flex;
    justify-content:center;
    gap:20px;
    margin:20px 0;
}
.lung{
    width:100px;
    height:150px;
    border-radius:50px;
    background:#f1c40f;
    animation:breath 3s infinite;
}
.lung.right{animation-delay:1.5s}

@keyframes breath{
    0%{transform:scaleY(1)}
    50%{transform:scaleY(1.15)}
    100%{transform:scaleY(1)}
}

.good{background:#2ecc71!important}
.moderate{background:#f1c40f!important}
.poor{background:#e74c3c!important}

.forecast{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:15px;
    text-align:center;
}
ul{padding-left:20px}
</style>
</head>

<body>

<header>
<h1>ğŸ« BreathSafe â€“ AQI & Patient Safety System</h1>
<p>Live AQI â€¢ Disease Suitability â€¢ Emergency Precautions</p>
</header>

<div class="container">

<div class="card">
<label>District</label>
<select id="city">
<option value="">-- Select District --</option>
<option>Bengaluru Urban</option><option>Mysuru</option><option>Hassan</option>
<option>Tumakuru</option><option>Mangaluru</option><option>Udupi</option>
<option>Belagavi</option><option>Ballari</option><option>Bidar</option>
<option>Kalaburagi</option><option>Shivamogga</option><option>Mandya</option>
</select>

<label>Disease</label>
<select id="condition">
<option>Asthma</option>
<option>COPD</option>
<option>Bronchitis</option>
<option>Allergic Rhinitis</option>
</select>

<button onclick="checkAQI()">Analyze AQI</button>
</div>

<div class="card">
<h3>ğŸ« Lung Condition (Live)</h3>
<div class="lungs">
<div class="lung" id="lungL"></div>
<div class="lung right" id="lungR"></div>
</div>
<p id="statusText">Status: --</p>
</div>

<div class="card">
<h3>ğŸ“Š AQI Forecast</h3>
<div class="forecast">
<div><b>Today</b><p id="today">--</p></div>
<div><b>Tomorrow</b><p id="tomorrow">--</p></div>
<div><b>Next 48 hrs</b><p id="next48">--</p></div>
</div>
</div>

<div class="card">
<h3>ğŸ©º Patient Suitability</h3>
<p id="suitability">--</p>
</div>

<div class="card">
<h3>ğŸš‘ Emergency Precautionary Measures</h3>
<ul id="precautions"></ul>
</div>

</div>

<script>
const city=document.getElementById("city");
const condition=document.getElementById("condition");
const lungL=document.getElementById("lungL");
const lungR=document.getElementById("lungR");

function checkAQI(){
fetch("/getAQI",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({city:city.value,condition:condition.value})
})
.then(res=>res.json())
.then(data=>{
today.innerText=data.today;
tomorrow.innerText=data.tomorrow;
next48.innerText=data.next48;

statusText.innerText="Status: "+data.status;
suitability.innerText=data.suitability;

lungL.className="lung "+data.lung_state;
lungR.className="lung right "+data.lung_state;

precautions.innerHTML="";
data.precautions.forEach(p=>{
const li=document.createElement("li");
li.innerText=p;
precautions.appendChild(li);
});
});
}
</script>

</body>
</html>
