<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BreathSafe ‚Äì AQI Patient Safety System</title>

<style>
/* ================= GLOBAL ================= */
*{box-sizing:border-box}
body{
    margin:0;
    font-family:"Segoe UI",sans-serif;
    background:#0f2027;
    color:white;
    position:relative;
    overflow-x:hidden;
}

/* ===== WATERMARK / IPR ===== */
body::before{
    content:"CREATED BY GOWTHAM";
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) rotate(-20deg);
    font-size:14vw;
    font-weight:900;
    color:rgba(255,255,255,0.035);
    white-space:nowrap;
    pointer-events:none;
    z-index:-1;
    letter-spacing:10px;
}

/* ================= HEADER ================= */
header{
    text-align:center;
    padding:25px;
}
header h1{margin:0}
header p{opacity:.85}

/* ================= LAYOUT ================= */
.container{
    max-width:1200px;
    margin:auto;
    padding:20px;
}
.card{
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(14px);
    border-radius:18px;
    padding:25px;
    margin-bottom:25px;
    box-shadow:0 15px 35px rgba(0,0,0,0.4);
}
.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:20px;
}

select,button{
    width:100%;
    padding:12px;
    margin-top:10px;
    border-radius:8px;
    border:none;
}
button{
    background:#ff5252;
    color:white;
    font-size:16px;
    cursor:pointer;
}
button:hover{opacity:.9}

/* ================= LUNGS ================= */
.lungs{
    display:flex;
    justify-content:center;
    gap:30px;
}
.lung{
    width:110px;
    height:160px;
    border-radius:60px;
    background:#f1c40f;
    animation:breath 3s infinite;
}
.lung.right{animation-delay:1.5s}

@keyframes breath{
    0%{transform:scaleY(1)}
    50%{transform:scaleY(1.25)}
    100%{transform:scaleY(1)}
}
.good{background:#2ecc71!important}
.moderate{background:#f1c40f!important}
.poor{
    background:#e74c3c!important;
    animation:shake .5s infinite;
}
@keyframes shake{
    0%{transform:translateX(0)}
    50%{transform:translateX(6px)}
    100%{transform:translateX(0)}
}

/* ================= LISTS ================= */
ul{padding-left:18px}
li{margin-bottom:10px}
small{opacity:.85}

/* ================= FOOTER ================= */
footer{
    text-align:center;
    padding:15px;
    opacity:.6;
    font-size:13px;
}
</style>
</head>

<body>

<header>
<h1>ü´Å BreathSafe</h1>
<p>AQI Forecast ‚Ä¢ Patient Safety ‚Ä¢ DBMS Powered</p>
</header>

<div class="container">

<!-- INPUT -->
<div class="card">
<h3>üìç Select District & Disease</h3>

<select id="city">
<option value="">-- Select Karnataka District --</option>
<script>
[
"Bagalkote","Ballari","Belagavi","Bengaluru Urban","Bengaluru Rural",
"Bidar","Chamarajanagar","Chikkaballapura","Chikkamagaluru",
"Chitradurga","Dakshina Kannada","Davanagere","Dharwad","Gadag",
"Hassan","Haveri","Kalaburagi","Kodagu","Kolar","Koppal","Mandya",
"Mysuru","Raichur","Ramanagara","Shivamogga","Tumakuru","Udupi",
"Uttara Kannada","Vijayanagara","Vijayapura","Yadgir"
].forEach(d=>document.write(`<option>${d}</option>`));
</script>
</select>

<select id="condition">
<option>Asthma</option>
<option>COPD</option>
<option>Bronchitis</option>
<option>Allergic Rhinitis</option>
</select>

<button onclick="analyze()">üö® Analyze AQI</button>
</div>

<!-- LUNG STATUS -->
<div class="card">
<h3>ü´Å Live Lung Condition</h3>
<div class="lungs">
<div class="lung" id="lungL"></div>
<div class="lung right" id="lungR"></div>
</div>
<p id="statusText">Status: --</p>
</div>

<!-- DATA GRID -->
<div class="grid">

<div class="card">
<h3>üìä AQI Forecast</h3>
<p>Today: <b id="today">--</b></p>
<p>Tomorrow: <b id="tomorrow">--</b></p>
<p>Next 48 hrs: <b id="next48">--</b></p>
</div>

<div class="card">
<h3>ü©∫ AQI Suitability</h3>
<p id="suitability">--</p>
</div>

<div class="card">
<h3>üöë Precautionary Measures</h3>
<ul id="precautions"></ul>
</div>

<div class="card">
<h3>üè• Nearby Hospitals (From DB)</h3>
<ul id="hospitals"></ul>
</div>

</div>
</div>

<footer>
¬© 2026 BreathSafe | Created by <b>Gowtham</b>  
(23CS604 ‚Äì Mini Project)
</footer>

<script>
function analyze(){
    if(city.value===""){
        alert("Please select a district");
        return;
    }

    fetch("/getAQI",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
            city: city.value,
            condition: condition.value
        })
    })
    .then(res=>res.json())
    .then(data=>{
        today.innerText = data.today;
        tomorrow.innerText = data.tomorrow;
        next48.innerText = data.next48;

        statusText.innerText = "Status: " + data.status;
        suitability.innerText = data.suitability;

        lungL.className = "lung " + data.level;
        lungR.className = "lung right " + data.level;

        precautions.innerHTML="";
        data.precautions.forEach(p=>{
            precautions.innerHTML += `<li>${p}</li>`;
        });

        hospitals.innerHTML="";
        data.hospitals.forEach(h=>{
            hospitals.innerHTML += `
                <li>
                    <b>${h.hospital_name}</b><br>
                    <small>${h.address}</small>
                </li>
            `;
        });
    })
    .catch(()=>{
        alert("Error fetching data");
    });
}
</script>

</body>
</html>
