<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BreathSafe ‚Äì GV AQI System</title>

<style>
/* ===== GV BACKGROUND ===== */
body{
    margin:0;
    font-family:"Segoe UI",sans-serif;
    background:#0f2027;
    color:white;
    position:relative;
    overflow-x:hidden;
}
body::before{
    content:"GV";
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:28vw;
    font-weight:900;
    color:rgba(255,255,255,0.05);
    z-index:-1;
    letter-spacing:20px;
}

/* ===== LAYOUT ===== */
header{
    text-align:center;
    padding:25px;
}
.container{
    max-width:1200px;
    margin:auto;
    padding:20px;
}
.card{
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(12px);
    border-radius:18px;
    padding:25px;
    margin-bottom:25px;
    box-shadow:0 15px 35px rgba(0,0,0,0.4);
}
.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:20px;
}

select,button{
    width:100%;
    padding:12px;
    margin-top:10px;
    border-radius:8px;
    border:none;
}
button{
    background:#ff5252;
    color:white;
    font-size:16px;
    cursor:pointer;
}

/* ===== LUNGS ===== */
.lungs{
    display:flex;
    justify-content:center;
    gap:30px;
}
.lung{
    width:110px;
    height:160px;
    border-radius:60px;
    background:#f1c40f;
    animation:breath 3s infinite;
}
.lung.right{animation-delay:1.5s}

@keyframes breath{
    0%{transform:scaleY(1)}
    50%{transform:scaleY(1.25)}
    100%{transform:scaleY(1)}
}
.good{background:#2ecc71!important}
.moderate{background:#f1c40f!important}
.poor{
    background:#e74c3c!important;
    animation:shake .5s infinite;
}
@keyframes shake{
    0%{transform:translateX(0)}
    50%{transform:translateX(5px)}
    100%{transform:translateX(0)}
}

ul{padding-left:18px}
li{margin-bottom:10px}
small{opacity:.85}
</style>
</head>

<body>

<header>
<h1>ü´Å BreathSafe</h1>
<p>GV AQI ‚Ä¢ Patient Safety ‚Ä¢ Emergency Support</p>
</header>

<div class="container">

<div class="card">
<select id="city">
<option value="">-- Select Karnataka District --</option>
<script>
[
"Bagalkote","Ballari","Belagavi","Bengaluru Rural","Bengaluru Urban","Bidar",
"Chamarajanagar","Chikkaballapura","Chikkamagaluru","Chitradurga",
"Dakshina Kannada","Davanagere","Dharwad","Gadag","Hassan","Haveri",
"Kalaburagi","Kodagu","Kolar","Koppal","Mandya","Mysuru","Raichur",
"Ramanagara","Shivamogga","Tumakuru","Udupi","Uttara Kannada",
"Vijayanagara","Vijayapura","Yadgir"
].forEach(d=>document.write(`<option>${d}</option>`));
</script>
</select>

<select id="condition">
<option>Asthma</option>
<option>COPD</option>
<option>Bronchitis</option>
<option>Allergic Rhinitis</option>
</select>

<button onclick="analyze()">üö® Analyze AQI</button>
</div>

<div class="card">
<h3>ü´Å Live Lung Status</h3>
<div class="lungs">
<div class="lung" id="lungL"></div>
<div class="lung right" id="lungR"></div>
</div>
<p id="statusText">Status: --</p>
</div>

<div class="grid">

<div class="card">
<h3>üìä AQI Forecast</h3>
<p>Today: <b id="today">--</b></p>
<p>Tomorrow: <b id="tomorrow">--</b></p>
<p>Next 48 hrs: <b id="next48">--</b></p>
</div>

<div class="card">
<h3>ü©∫ Suitability</h3>
<p id="suitability">--</p>
</div>

<div class="card">
<h3>üöë Precautions</h3>
<ul id="precautions"></ul>
</div>

<div class="card">
<h3>üè• Nearby Hospitals</h3>
<ul id="hospitals"></ul>
</div>

</div>
</div>

<script>
function analyze(){
fetch("/getAQI",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
city:city.value,
condition:condition.value
})
})
.then(res=>res.json())
.then(data=>{
today.innerText=data.today;
tomorrow.innerText=data.tomorrow;
next48.innerText=data.next48;
statusText.innerText="Status: "+data.status;
suitability.innerText=data.suitability;

lungL.className="lung "+data.level;
lungR.className="lung right "+data.level;

precautions.innerHTML="";
data.precautions.forEach(p=>{
precautions.innerHTML+=`<li>${p}</li>`;
});

hospitals.innerHTML="";
data.hospitals.forEach(h=>{
hospitals.innerHTML+=`
<li>
<b>${h.name}</b><br>
<small>${h.address}</small>
</li>`;
});
});
}
</script>

</body>
</html>
