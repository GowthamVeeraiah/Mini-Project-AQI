<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BreathSafe â€“ Smart Patient Safety System</title>

<style>
body{
    margin:0;
    font-family:Segoe UI, sans-serif;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
}
header{
    text-align:center;
    padding:25px;
}
.container{
    max-width:1100px;
    margin:auto;
    padding:20px;
}
.card{
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(12px);
    border-radius:18px;
    padding:25px;
    margin-bottom:25px;
    box-shadow:0 15px 35px rgba(0,0,0,0.3);
}
select,button{
    width:100%;
    padding:12px;
    margin-top:10px;
    border-radius:8px;
    border:none;
}
button{
    background:#ff5252;
    color:white;
    font-size:16px;
    cursor:pointer;
}

/* LUNGS */
.lungs{
    display:flex;
    justify-content:center;
    gap:30px;
}
.lung{
    width:110px;
    height:160px;
    border-radius:60px;
    background:#f1c40f;
    animation:breath 3s infinite;
}
.lung.right{animation-delay:1.5s}

@keyframes breath{
    0%{transform:scaleY(1)}
    50%{transform:scaleY(1.2)}
    100%{transform:scaleY(1)}
}

.good{background:#2ecc71!important}
.moderate{background:#f1c40f!important}
.poor{
    background:#e74c3c!important;
    animation:shake 0.5s infinite;
}

@keyframes shake{
    0%{transform:translateX(0)}
    25%{transform:translateX(-5px)}
    50%{transform:translateX(5px)}
    75%{transform:translateX(-5px)}
    100%{transform:translateX(0)}
}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
}

ul{padding-left:20px}
h3{margin-top:0}
</style>
</head>

<body>

<header>
<h1>ğŸ« BreathSafe</h1>
<p>AI-Inspired AQI â€¢ Patient Safety â€¢ Emergency Support</p>
</header>

<div class="container">

<div class="card">
<select id="city">
<option value="">-- Select Karnataka District --</option>
<script>
["Bagalkote","Ballari","Belagavi","Bengaluru Rural","Bengaluru Urban","Bidar",
"Chamarajanagar","Chikkaballapura","Chikkamagaluru","Chitradurga","Dakshina Kannada",
"Davanagere","Dharwad","Gadag","Hassan","Haveri","Kalaburagi","Kodagu","Kolar","Koppal",
"Mandya","Mysuru","Raichur","Ramanagara","Shivamogga","Tumakuru","Udupi",
"Uttara Kannada","Vijayanagara","Vijayapura","Yadgir"]
.forEach(d=>document.write(`<option>${d}</option>`));
</script>
</select>

<select id="condition">
<option>Asthma</option>
<option>COPD</option>
<option>Bronchitis</option>
<option>Allergic Rhinitis</option>
</select>

<button onclick="analyze()">ğŸš¨ Analyze Patient Safety</button>
</div>

<div class="card">
<h3>ğŸ« Live Lung Condition</h3>
<div class="lungs">
<div class="lung" id="lungL"></div>
<div class="lung right" id="lungR"></div>
</div>
<p id="statusText">Status: --</p>
</div>

<div class="grid">
<div class="card">
<h3>ğŸ“Š AQI Forecast</h3>
<p>Today: <span id="today">--</span></p>
<p>Tomorrow: <span id="tomorrow">--</span></p>
<p>Next 48 hrs: <span id="next48">--</span></p>
</div>

<div class="card">
<h3>ğŸ©º Suitability</h3>
<p id="suitability">--</p>
</div>

<div class="card">
<h3>ğŸš‘ Emergency Precautions</h3>
<ul id="precautions"></ul>
</div>

<div class="card">
<h3>ğŸ¥ Nearby Hospitals</h3>
<ul id="hospitals"></ul>
</div>
</div>

</div>

<script>
function analyze(){
fetch("/getAQI",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
city:city.value,
condition:condition.value
})
})
.then(res=>res.json())
.then(data=>{
today.innerText=data.today;
tomorrow.innerText=data.tomorrow;
next48.innerText=data.next48;
statusText.innerText="Status: "+data.status;
suitability.innerText=data.suitability;

lungL.className="lung "+data.level;
lungR.className="lung right "+data.level;

precautions.innerHTML="";
data.precautions.forEach(p=>{
precautions.innerHTML+=`<li>${p}</li>`;
});

hospitals.innerHTML="";
data.hospitals.forEach(h=>{
hospitals.innerHTML+=`<li>${h}</li>`;
});
});
}
</script>

</body>
</html>
